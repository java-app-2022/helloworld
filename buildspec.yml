version: 0.2

phases:
  install:
    runtime-versions:
      java: corretto11
  pre_build:
    commands:
      - echo Nothing to do in the pre_build phase...
      - export CODEARTIFACT_AUTH_TOKEN=eyJ2ZXIiOjEsImlzdSI6MTY0OTMwNzI0NiwiZW5jIjoiQTEyOEdDTSIsInRhZyI6InNySVEtTl9CUHlsS1YtaDMySlBkNEEiLCJleHAiOjE2NDkzNTA0NDYsImFsZyI6IkExMjhHQ01LVyIsIml2IjoiUFl2NmNKY1VvdjlqdW5UWiJ9.ss8pNf7ALlOO72x30TwG6A.cdjYa1d2FloXNzZ_.e65olLFf-GO839_mzpB6OcNik-8gpUcmnV_JrABClKqp5xknyjk7tEFEzZ-ns4rMu-jtt805RuGaBozkKKjFBkMEQMjEWWbmXy0phkuFIMsK-t7e-7DRaslLWU7ISfbkgUZjrJB9EgPREfbySTnpfAz1yFQSA4MhKttqZhv9zS82F8uMB19gu-djc9lYVjeK3GRZH4_QM5IqHwsxfVJrotwv5IT_9X3bxzbTt_OEABmxvc3TTkMXO2P_C_vh7hwVau9JH0aAhv8oTPsWla2IlbJlr-mJQPMLI1X1hD13MOcKRS6mPoFQRRJrPQhsq90SnOVWhcWNJ1ZMhkfOFqZQNNmMXZX1ftVVe4PJ9KG0TOekhqscmxHNml2Muyasn4aOzI6K-EtFUYZEMXm2vuqSyo8cDqQTpw_-QRK1xdleAjLq4cFp9xZETuJlkUP2czK69XzYGiy5GL118MTtEWFR3MeBpfKQBAtZmkeeyp5NktPdI5LM9k4FoEfIUdAV9INDfteqktheSoN2Lps-w4CSGr1Fc8wkT91mjRxME888sQotLCMJDvU4o1wdns5taKjN_JmL2ujEuOYBFrWbeG4YGjWxUmK109c-dVKbPq4Sr3SgIRwEGwHXXh4Q4I6HpaCWLoyZcAmqCSsqo2kkeK8eqPZn48VxgHk26mbo0L1fxybcR6lFwQ3ENRLpXN2EV635wWKY5_dfxpO4fi6ypo8eeRm3EuYlWOlGsvDlw5hAwmleVzpWzd-qmS0AQl5UP0W6Au2GxiKQgEacXUL3EFqcxpovCsHUn0rIA_tDPQJKoS1ctIyONkcskpCDrrT9aTZHfiXRXCvmpj828nxP8hxrOXOSjuKuXlOZC0fmzEUA2dJyoYhwD8J0WUonV_nrDlW0BvD8E1FbsfsEZBW9EvOh.e_DjSVCDm7d-mLSmNrI0NA
      - cp settings.xml /root/.m2/
  build:
    commands:
      - echo Build started on `date`
      - mvn clean deploy
  post_build:
    commands:
      - echo Build completed on `date`
      
artifacts:
  files:
    - target/helloworld-1.1.jar
    - appspec.yml
    - scripts/start-process.sh
    - scripts/stop-process.sh
  discard-paths: yes
